package com.example.demo.web;

import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/api/backlog")
@CrossOrigin
public class BacklogController {
	
	 @Autowired
		private ProjectTaskService projectTaskService;
	    @Autowired
	    private MapValidationErrorService mapValidationErrorService;
	    @PostMapping("/{backlog_id}")
	    public ResponseEntity<?> addPTtoBacklog(@Valid @RequestBody ProjectTask projectTask, BindingResult result,@PathVariable String backlog_id){
	    	ResponseEntity<?> errorMap=mapValidationErrorService.mapValidationErrror(result);
	    	if(errorMap!=null)
	    		 return errorMap;
	    	ProjectTask projecTask1=projectTaskService.addProjectTask(backlog_id, projectTask);
	    	return new ResponseEntity<ProjectTask>(projecTask1,HttpStatus.CREATED);
	    }

}
